# RiderFlow 주요 플로우

## 1) 정산 업로드→검증

1. 파일 선택/Drag&Drop.
2. 업로드 진행 표시.
3. 서버 파싱(전화/이름/라이더ID 매칭).
4. 검증: 필수 컬럼 누락, 타입 오류, 매칭 실패, 날짜 범위 체크.
5. 결과 표시: 성공/실패 카운트, 오류 리스트 다운로드(CSV).
6. 다시 업로드 또는 결과 보기로 이동.

## 2) 정산 결과 조회

1. 기본 기간 필터(최근 주).
2. 요약 지표 로드(건수/정산액/라이더 수).
3. 기사별 목록 로드(검색/정렬/페이징).
4. PDF/엑셀 다운로드 또는 기사별 상세 이동.

## 3) 기사별 상세

1. rider_branch_map으로 소속 확인.
2. daily_settlements 기간 범위 쿼리.
3. 그래프/테이블 렌더링.
4. 정산서 PDF 생성/다운로드.

## 4) 지난 정산 내역

1. 기간 필터(주/월/임의 구간) 선택.
2. 지사/기사/금액 조건으로 daily_settlements 조회.
3. 결과 다운로드(PDF/엑셀) 또는 기사별 상세 이동.

## 5) 기사 관리

1. 업로드 시 신규 라이더 자동 등록(중복 매칭은 phone/name/ID).
2. 수동 등록/수정(이름/전화/계좌/지사 연결).
3. RiderBranchMap 상태 변경(active/inactive).

## 6) 지사 설정

1. 프로필/로고/컬러 저장.
2. 권한 롤 부여(본사/지사/회계).
3. 정산 기본 공식 저장(공제율 등).

## 7) 알림 발송(후순위)

1. payslips 생성 후 발송 요청.
2. kakao_profiles 이용해 템플릿/발신키 적용.
3. message_logs 기록(성공/실패 코드).
4. 알림센터에서 필터/재발송.
